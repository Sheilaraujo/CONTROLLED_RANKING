<style>
  td,
  th {
      /* border: 1px solid rgb(190, 190, 190); */
      padding: 10px;
  }

  td {
      text-align: center;
  }

  tr:nth-child(even) {
      background-color: #eee;
  }

  th[scope="col"] {
      /* background-color: #696969; */
      /* color: #fff; */
      text-align: center
  }

  th[scope="row"] {
      background-color: #d7d9f2;
  }
</style>
 <div class="container mt-5">
  <h3>Minha dupla e meus adversários</h3>
  <div class=" font2" style="flex-container">
      <%# <div class="back-show-5 col-md-6 font2"> %>

    <div class="font2 m-5">
      <table class="table">
        <thead>
            <tr>
              <th scope="col">Data</th>
              <th scope="col">Local</th>
              <th scope="col">Dupla</th>
              <th scope="col">Adversários</th>
            </tr>
        </thead>
        <tbody>
          <% @schedules.each do |sched|%>
            <% if sched.user_id == current_user.id %>
              <% duo_detail = User.where(id: sched.partner["duo"]).pluck(:name) %>
              <% opponent_1_detail = User.where(id: sched.partner["opponent_1"]).pluck(:name) %>
              <% opponent_2_detail = User.where(id: sched.partner["opponent_2"]).pluck(:name) %>
              <% opponents = opponent_1_detail + opponent_2_detail %>
              <tr>
                <td> <time datetime="DD-MM-YYYY"><%=sched.date%></time> </td>
                <td><%= sched.place %></td>
                <td><%=duo_detail.first%></td>
                <td><%= opponents.first %></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>

     <div class="col-md-6 font2" style="flex-container">
      <%# <div class="back-show-5 col-md-6 font2"> %>

    <div class=" col-md-6 font2">
      <table class="table">
        <thead>
            <tr>
              <th scope="col">Data</th>
              <th scope="col">Local</th>
              <th scope="col">Dupla</th>
              <th scope="col">Adversários</th>
              <th scope="col">Iniciar Partida</th>
            </tr>
        </thead>
        <tbody>
          <% @user_schedules.each do |sched|%>
              <% duo_detail = User.where(id: sched.partner["duo"]).pluck(:name) %>
              <%= opponent_1_detail = User.where(id: sched.partner["opponent_1"]).pluck(:name) %>
              <%= opponent_2_detail = User.where(id: sched.partner["opponent_2"]).pluck(:name) %>
              <% opponents = [opponent_1_detail, opponent_2_detail] unless opponent_2_detail.empty? && opponent_1_detail.empty? %>
              <tr>
                <td> <time datetime="DD-MM-YYYY"><%=sched.date%></time> </td>
                <td><%= sched.place %></td>
                <td><%= duo_detail.first %></td>
                <td><%= opponents.first if opponents %></td>
                <td>
                  <% if opponents %>
                    <%= link_to "Start Game", new_team_path(params[:id] = sched), class: "btn btn-success" %>
                  <% else %>
                    X
                  <% end %>
                  </td>
              </tr>
            <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mb-4">
    <%# so once we hit seacrch here, we will stay o the index page
    and the number of results will be the resut of our query %>
    <%= form_tag schedule_path, method: :get do %>
    <%# query=superman&commit=Search - query here is the name of the input%>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "Find a partner"
      %>
      <%= submit_tag "Search", class: "btn btn-primary mt-2" %>
    <% end %>
    </div>
    <%# AFTER ADDING MTS AND TALKING ABOUT THE FORMS STRUCTUTE GO BACK TO SCRIPT %>
    <%# ============== FORM ENDS HERE ============= %>
      <div id="schedules">
        <% @results.each do |result| %>
          <%# if result.director_id %>
            <%# <p>Movie by = result.director.last_name</p> %>
          <%# end %>
          <h4><%= result.searchable.date %></h4>
          <p><%= result.searchable.place %></p>
        <% end %>
      </div>
    </div>
  </div>
</div>
